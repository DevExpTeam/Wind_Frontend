// - 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	- 	8,584 	8,980 	8,438 	5,880 	6,728 	6,047 	5,946 	7,420 	5,913 	7,931 	8,010 	7,957 	9,262 	8,703 	9,017 	6,256 	7,240 	6,546 	6,496 	7,547 	6,178 	8,228 	8,392 	8,543 	10,455 	8,384 	7,622 	6,448 	7,333 	6,012 	6,558 	6,876 	5,561 	8,288 	8,062 	8,755 	10,857 	8,322 	7,734 	5,814 	7,179 	6,844 	7,469 	6,716 	5,181 	7,461 	7,232 	8,572 	7,676 	7,928 	7,832 	5,746 	6,464 	6,974 	7,109 	7,482 	5,627 	7,181 	7,061 	8,171 	8,846 	7,836 	7,757 	4,943 	6,295 	6,147 	6,211 	6,950 	5,469 	7,086 	6,045 	7,834 	10,348 	6,626 	6,849 	4,468 	6,502 	6,164 	6,241 	6,731 	5,025 	6,388 	5,587 	7,257 	7,434 	5,944 	6,786 	4,518 	6,182 	5,917 	6,659 	6,160 	3,830 	5,603 	5,692 	7,840 	8,651 	6,076 	6,932 	4,411 	6,294 	4,981 	6,371 	5,923 	3,716 	6,724 	7,155 	9,894 	8,755 	6,486 	6,634 	4,043 	5,441 	6,149 	6,166 	6,030 	3,647 	5,120 	5,759 	8,095 	12,346 	6,698 	7,031 	4,358 	4,713 	5,062 	5,639 	5,865 	4,628 	5,287 	6,193 	7,591 	13,143 	7,908 	8,560 	4,467 	5,088 	5,694 	6,232 	6,139 	5,108 	6,495 	6,308 	8,044 	20,392 	7,295 	8,769 	4,108 	5,926 	5,964 	6,573 	6,381 	5,094 	6,617 	5,255 	11,232 	20,913 	6,212 	7,404 	3,566 	4,936 	5,065 	6,433 	4,735 	3,392 	5,788 	5,686 	18,942 	6,045 	5,400 	7,160 	3,958 	4,187 	4,772 	5,908 	4,748 	3,492 	5,346 	5,386 	10,704 	7,148 	5,769 	6,654 	3,851 	4,653 	6,013 	6,403 	4,269 	2,750 	3,568 	3,823 	8,827 	9,593 	5,986 	7,494 	3,421 	4,138 	4,760 	5,940 	5,568 	3,340 	3,840 	4,326 	6,768 	13,918 	5,163 	6,442 	3,528 	4,354 	4,874 	8,357 	5,015 	3,234 	4,015 	3,291 	6,178 	6,256 	4,663 	7,001 	2,902 	3,729 	5,096 	7,933 	4,698 	2,957 	4,207 	3,890 	6,945 	5,315 	4,222 	7,401 	3,429 	3,513 	5,561 	7,954 	3,962 	2,445 	3,513 	3,642 	13,496 	4,882 	4,110 	7,750 	3,648 	4,091 	5,801 	6,777 	4,493 	2,612 	3,757 	3,447 	7,301 	7,415 	5,731 	7,429 	4,054 	5,167 	6,088 	8,355 	4,234 	2,319 	2,759 	3,092 	5,944 	7,402 	5,721 	7,416 	4,047 	5,158 	6,077 	8,340 	4,226 	2,315 	2,754 	3,087 	5,934 	7,402 	5,722 	7,418 	4,048 	5,160 	6,080 	8,345 	4,229 	2,317 	2,756 	3,089 	5,939 	7,402 	5,721 	7,417 	4,047 	5,159 	6,078 	8,343 	4,228 	2,316 	2,755 	3,088 	5,937 	7,402 	5,722 	7,419 	4,049 	5,161 	6,081 	8,347 	4,230 	2,318 	2,757 	3,090 	5,941 	7,402 	5,721 	7,418 	4,048 	5,160 	6,080 	8,345 	4,229 	2,317 	2,756 	3,089 	5,940 	7,402 	5,722 	7,418 	4,048 	5,161 	6,080 	8,346 	4,230 	2,317 	2,756 	3,090 	5,940 	7,402 	5,722 	7,419 	4,049 	5,162 	6,082 	8,349 	4,231 	2,318 	2,758 	3,091 	5,944 	7,402 	5,722 	7,419 	4,049 	5,161 	6,081 	8,348 	4,231 	2,318 	2,757 	3,091 	5,943 	7,310 	5,652 	7,328 	4,000 	5,099 	6,009 	8,250 	4,181 	2,291 	2,725 	3,055 	5,875 	7,227 	5,588 	7,245 	3,955 	5,042 	5,941 	8,157 	4,135 	2,265 	2,695 	3,021 	5,810 	7,147 	5,525 	7,165 	3,911 	4,986 	5,876 	8,068 	4,089 	2,241 	2,665 	2,988 	5,746 	7,069 	5,465 	7,087 	3,868 	4,932 	5,812 	7,980 	4,045 	2,216 	2,637 	2,956 	5,684 	6,993 	5,406 	7,010 	3,826 	4,879 	5,749 	7,894 	4,001 	2,192 	2,608 	2,924 	5,623 	6,917 	5,348 	6,935 	3,785 	4,826 	5,687 	7,809 	3,958 	2,169 	2,580 	2,892 	5,562 	6,843 	5,290 	6,860 	3,744 	4,774 	5,626 	7,724 	3,915 	2,145 	2,552 	2,861 	5,502 	6,768 	5,233 	6,786 	3,704 	4,722 	5,565 	7,641 	3,873 	2,122 	2,525 	2,830 	5,442 	6,695 	5,176 	6,712 	3,664 	4,671 	5,504 	7,558 	3,831 	2,099 	2,497 	2,799 	5,383 	6,622 	5,120 	6,639 	3,624 	4,620 	5,444 	7,475 	3,789 	2,076 	2,470 	2,769 	5,324
import moment from 'moment';
import React, { useEffect, useState } from 'react';
import Chart from 'react-apexcharts';
import { SidebarContext } from '../../contexts/SidebarContext';
import { ApexOptions } from 'apexcharts';

const MAX_SERIES_COUNT = null;

const defaultOption = {
  chart: {
    id: 'apexchart-example',
    stacked: true,
    width: '100%',
    animations: {
      enabled: true
    }
  },
  dataLabels: {
    enabled: false
  },
  xaxis: {
    labels: {
      show: true,
      rotate: -45,
      rotateAlways: false
    }
  },
  yaxis: {
    decimalsInFloat: 2,
    labels: {
      show: true
    }
  }
};
const DEFAULT_GRAPH_TYPE = 'area';

const CustomGraph = ({
  datum,
  option,
  type = DEFAULT_GRAPH_TYPE
}: {
  datum: ApexAxisChartSeries;
  option?: ApexOptions;
  type?:
    | 'line'
    | 'area'
    | 'bar'
    | 'pie'
    | 'donut'
    | 'radialBar'
    | 'scatter'
    | 'bubble'
    | 'heatmap'
    | 'candlestick'
    | 'boxPlot'
    | 'radar'
    | 'polarArea'
    | 'rangeBar'
    | 'rangeArea'
    | 'treemap';
}) => {
  const { sidebarToggle } = React.useContext(SidebarContext);

  const [windowSize, setWindowSize] = useState({
    width: window.innerWidth,
    height: window.innerHeight
  });

  useEffect(() => {
    const handleResize = () => {
      setWindowSize({ width: window.innerWidth, height: window.innerHeight });
    };
    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  const [options, setOptions] = useState<ApexOptions>({});

  const [series, setSeries] = useState<ApexAxisChartSeries>([]);
  const [graphType, setGraphType] = useState(DEFAULT_GRAPH_TYPE);
  useEffect(() => {
    setOptions({
      ...defaultOption,
      ...option,
      stroke: {
        width: 1
        // curve: new Array(datum.length).fill('straight')
      }
    });
  }, [option, datum]);
  useEffect(() => {
    const result: ApexAxisChartSeries = [];
    datum.map((d) => {
      if (MAX_SERIES_COUNT == null) {
        result.push(d);
      } else if (d?.data?.length < MAX_SERIES_COUNT) {
        result.push(d);
      } else {
        const step = Math.floor(d.data.length / MAX_SERIES_COUNT);
        const r: any[] = [];
        for (let i = 0; i < MAX_SERIES_COUNT; i++) {
          r.push(d.data[i * step]);
        }
        result.push({
          ...d,
          data: r
        });
      }
    });
    setSeries(result);
  }, [datum]);

  useEffect(() => {
    setGraphType(type);
  });
  return (
    <div
      style={{
        borderWidth: 2,
        borderRadius: 10,
        margin: 10,
        padding: 10
      }}
    >
      <Chart
        type={type}
        width={1366 * (sidebarToggle ? 0.65 : 0.8)}
        height={768 * (sidebarToggle ? 0.6 : 0.7)}
        options={options}
        series={series}
      />
    </div>
  );
};

export default CustomGraph;
